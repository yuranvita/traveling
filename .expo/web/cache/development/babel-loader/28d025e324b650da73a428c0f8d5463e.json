{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Yuran\\\\Documents\\\\PROJECTs\\\\Apptur\\\\src\\\\pages\\\\CreateAttractions\\\\AttractionData.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Switch from \"react-native-web/dist/exports/Switch\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Feather } from '@expo/vector-icons';\nimport { RectButton } from 'react-native-gesture-handler';\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport * as ImagePicker from 'expo-image-picker';\nimport api from \"../../services/api\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nexport default function AttractionData() {\n  var _this = this;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      about = _useState4[0],\n      setAbout = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      instruction = _useState6[0],\n      setInstructions = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      opening_hours = _useState8[0],\n      setOpeninghours = _useState8[1];\n\n  var _useState9 = useState(true),\n      _useState10 = _slicedToArray(_useState9, 2),\n      open_on_weekends = _useState10[0],\n      setOpenonweekeds = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      whatsapp = _useState12[0],\n      setWhatsapp = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      images = _useState14[0],\n      setImages = _useState14[1];\n\n  var _useState15 = useState(''),\n      _useState16 = _slicedToArray(_useState15, 2),\n      municipality_id = _useState16[0],\n      setMunicipality_id = _useState16[1];\n\n  var token = AsyncStorage.getItem(\"myToken\");\n  var navigation = useNavigation();\n  var route = useRoute();\n  var params = route.params;\n\n  function handleCreateAttraction() {\n    var _params$position, latitude, longitude, data;\n\n    return _regeneratorRuntime.async(function handleCreateAttraction$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _params$position = params.position, latitude = _params$position.latitude, longitude = _params$position.longitude;\n            console.log({\n              name: name,\n              about: about,\n              instruction: instruction,\n              opening_hours: opening_hours,\n              open_on_weekends: open_on_weekends,\n              latitude: latitude,\n              longitude: longitude,\n              whatsapp: whatsapp,\n              municipality_id: municipality_id\n            });\n            data = new FormData();\n            data.append('name', name);\n            data.append('about', about);\n            data.append('latitude', String(latitude));\n            data.append('longitude', String(longitude));\n            data.append('instruction', instruction);\n            data.append('opening_hours', opening_hours);\n            data.append('open_on_weekends', String(open_on_weekends));\n            data.append('whatsapp', whatsapp);\n            data.append('municipality_id', municipality_id);\n            images.forEach(function (image, index) {\n              data.append('images', {\n                name: \"image_\" + index + \".jpg\",\n                type: 'image/jpg',\n                uri: image\n              });\n            });\n            _context.next = 15;\n            return _regeneratorRuntime.awrap(api.post('attractions', data, {\n              headers: {\n                \"authorization\": \"Bearer \" + token\n              }\n            }));\n\n          case 15:\n            navigation.navigate('AttractionsMap');\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function handleSelectImages() {\n    var _await$ImagePicker$re, status, result, image;\n\n    return _regeneratorRuntime.async(function handleSelectImages$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.requestCameraRollPermissionsAsync());\n\n          case 2:\n            _await$ImagePicker$re = _context2.sent;\n            status = _await$ImagePicker$re.status;\n\n            if (!(status !== 'granted')) {\n              _context2.next = 7;\n              break;\n            }\n\n            alert('eita , precisamos de acesso ás suas fotos...');\n            return _context2.abrupt(\"return\");\n\n          case 7:\n            _context2.next = 9;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              allowsEditing: true,\n              quality: 1,\n              mediaTypes: ImagePicker.MediaTypeOptions.Images\n            }));\n\n          case 9:\n            result = _context2.sent;\n\n            if (!result.cancelled) {\n              _context2.next = 14;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 14:\n            image = result.uri;\n            setImages([].concat(_toConsumableArray(images), [image]));\n\n          case 16:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      municipality = _useState18[0],\n      setMunicipality = _useState18[1];\n\n  useEffect(function () {\n    api.get('/municipality', {\n      headers: {\n        \"authorization\": \"Bearer \" + token\n      }\n    }).then(function (response) {\n      setMunicipality(response.data.name);\n    });\n  });\n  return React.createElement(ScrollView, {\n    style: styles.container,\n    contentContainerStyle: {\n      padding: 24\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }\n  }, \"Dados\"), React.createElement(Text, {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }, \"Nome\"), React.createElement(TextInput, {\n    style: styles.input,\n    value: name,\n    onChangeText: setName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }\n  }), React.createElement(Text, {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }\n  }, \"Sobre\"), React.createElement(TextInput, {\n    style: [styles.input, {\n      height: 110\n    }],\n    multiline: true,\n    value: about,\n    onChangeText: setAbout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }\n  }), React.createElement(Text, {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }\n  }, \"Fotos\"), React.createElement(View, {\n    style: styles.uploadedImagesContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }\n  }, images.map(function (image) {\n    return React.createElement(Image, {\n      key: image,\n      source: {\n        uri: image\n      },\n      style: styles.uploadedImage,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 13\n      }\n    });\n  })), React.createElement(TouchableOpacity, {\n    style: styles.imagesInput,\n    onPress: handleSelectImages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }\n  }, React.createElement(Feather, {\n    name: \"plus\",\n    size: 24,\n    color: \"#15B6D6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }\n  })), React.createElement(Text, {\n    style: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }\n  }, \"Visita\\xE7\\xE3o\"), React.createElement(Text, {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }\n  }, \"Instru\\xE7\\xF5es\"), React.createElement(TextInput, {\n    style: [styles.input, {\n      height: 110\n    }],\n    multiline: true,\n    value: instruction,\n    onChangeText: setInstructions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }\n  }), React.createElement(Text, {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }\n  }, \"Horario de visitas\"), React.createElement(TextInput, {\n    style: styles.input,\n    value: opening_hours,\n    onChangeText: setOpeninghours,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }\n  }), React.createElement(Text, {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }, \"WhatsApp\"), React.createElement(TextInput, {\n    style: styles.input,\n    value: whatsapp,\n    onChangeText: setWhatsapp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: styles.switchContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }\n  }, \"Atende final de semana?\"), React.createElement(Switch, {\n    thumbColor: \"#fff\",\n    trackColor: {\n      false: '#ccc',\n      true: '#39CC83'\n    },\n    value: open_on_weekends,\n    onValueChange: setOpenonweekeds,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 9\n    }\n  })), React.createElement(RectButton, {\n    style: styles.nextButton,\n    onPress: handleCreateAttraction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.nextButtonText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 9\n    }\n  }, \"Cadastrar\")));\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  title: {\n    color: '#5c8599',\n    fontSize: 24,\n    fontFamily: 'Nunito_700Bold',\n    marginBottom: 32,\n    paddingBottom: 24,\n    borderBottomWidth: 0.8,\n    borderBottomColor: '#D3E2E6'\n  },\n  label: {\n    color: '#8fa7b3',\n    fontFamily: 'Nunito_600SemiBold',\n    marginBottom: 8\n  },\n  comment: {\n    fontSize: 11,\n    color: '#8fa7b3'\n  },\n  input: {\n    backgroundColor: '#fff',\n    borderWidth: 1.4,\n    borderColor: '#d3e2e6',\n    borderRadius: 20,\n    height: 56,\n    paddingVertical: 18,\n    paddingHorizontal: 24,\n    marginBottom: 16,\n    textAlignVertical: 'top'\n  },\n  uploadedImagesContainer: {\n    flexDirection: 'row'\n  },\n  uploadedImage: {\n    width: 64,\n    height: 64,\n    borderRadius: 20,\n    marginBottom: 32,\n    marginRight: 8\n  },\n  imagesInput: {\n    backgroundColor: 'rgba(255, 255, 255, 0.5)',\n    borderStyle: 'dashed',\n    borderColor: '#96D2F0',\n    borderWidth: 1.4,\n    borderRadius: 20,\n    height: 56,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 32\n  },\n  switchContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginTop: 16\n  },\n  nextButton: {\n    backgroundColor: '#15c3d6',\n    borderRadius: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n    height: 56,\n    marginTop: 32\n  },\n  nextButtonText: {\n    fontFamily: 'Nunito_800ExtraBold',\n    fontSize: 16,\n    color: '#FFF'\n  }\n});","map":{"version":3,"sources":["C:/Users/Yuran/Documents/PROJECTs/Apptur/src/pages/CreateAttractions/AttractionData.tsx"],"names":["React","useState","useEffect","Feather","RectButton","useNavigation","useRoute","ImagePicker","api","AsyncStorage","AttractionData","name","setName","about","setAbout","instruction","setInstructions","opening_hours","setOpeninghours","open_on_weekends","setOpenonweekeds","whatsapp","setWhatsapp","images","setImages","municipality_id","setMunicipality_id","token","getItem","navigation","route","params","handleCreateAttraction","position","latitude","longitude","console","log","data","FormData","append","String","forEach","image","index","type","uri","post","headers","navigate","handleSelectImages","requestCameraRollPermissionsAsync","status","alert","launchImageLibraryAsync","allowsEditing","quality","mediaTypes","MediaTypeOptions","Images","result","cancelled","municipality","setMunicipality","get","then","response","styles","container","padding","title","label","input","height","uploadedImagesContainer","map","uploadedImage","imagesInput","switchContainer","false","true","nextButton","nextButtonText","StyleSheet","create","flex","color","fontSize","fontFamily","marginBottom","paddingBottom","borderBottomWidth","borderBottomColor","comment","backgroundColor","borderWidth","borderColor","borderRadius","paddingVertical","paddingHorizontal","textAlignVertical","flexDirection","width","marginRight","borderStyle","justifyContent","alignItems","marginTop"],"mappings":"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","sourcesContent":["import React, { useState , useEffect} from 'react';\r\nimport { ScrollView, View, StyleSheet, Switch, Text, TextInput, TouchableOpacity, Image} from 'react-native';\r\nimport { Feather } from '@expo/vector-icons';\r\nimport { FlatList, RectButton } from 'react-native-gesture-handler';\r\nimport { useNavigation, useRoute } from '@react-navigation/native';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport api from '../../services/api';\r\nimport RadioForm from 'react-native-simple-radio-button';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\n\r\n\r\ninterface AttractionDataRouteParams{\r\n  position : {\r\n    latitude : number ;\r\n    longitude : number ;\r\n  }\r\n}\r\n\r\ninterface Municipality{\r\n  name : string,\r\n}\r\n\r\n\r\n\r\nexport default function AttractionData() {\r\n\r\n  const[name ,setName] =useState('');\r\n  const[about ,setAbout] =useState('');\r\n  const[instruction ,setInstructions] =useState('');\r\n  const[opening_hours ,setOpeninghours] =useState('');\r\n  const[open_on_weekends ,setOpenonweekeds] =useState(true);\r\n  const[whatsapp , setWhatsapp] = useState('')\r\n  const[images , setImages] = useState<string[]>([]);\r\n  const[municipality_id , setMunicipality_id] = useState('');\r\n  const token = AsyncStorage.getItem(\"myToken\");\r\n  // const [token, setToken] = useState(\"\");\r\n  \r\n  // const load = async () => {\r\n  //   let token = await AsyncStorage.getItem(\"myToken\");\r\n\r\n  //   if(token !== null){\r\n  //     setToken(token);\r\n  //   }\r\n  // }\r\n\r\n  // load();\r\n  \r\n  const navigation = useNavigation();\r\n  const route = useRoute();\r\n  const params = route.params as AttractionDataRouteParams;\r\n\r\n async function handleCreateAttraction(){\r\n   \r\n    const {latitude , longitude} = params.position;\r\n\r\n    console.log({\r\n      name,\r\n      about,\r\n      instruction,\r\n      opening_hours,\r\n      open_on_weekends,\r\n      latitude,\r\n      longitude,\r\n      whatsapp,\r\n      municipality_id\r\n    })\r\n    const data = new FormData();\r\n\r\n    data.append('name' , name);\r\n    data.append('about' , about);\r\n    data.append('latitude' , String(latitude));\r\n    data.append('longitude' , String(longitude));\r\n    data.append('instruction' , instruction);\r\n    data.append('opening_hours' , opening_hours);\r\n    data.append('open_on_weekends' , String(open_on_weekends));\r\n    data.append('whatsapp', whatsapp);\r\n    data.append('municipality_id' , municipality_id);\r\n    \r\n\r\n    images.forEach((image , index)=>{\r\n      data.append('images',{\r\n        name : `image_${index}.jpg`,\r\n        type: 'image/jpg',\r\n        uri : image,\r\n      }as any)\r\n    });\r\n    \r\n    await api.post('attractions'  ,data  , { headers : {\r\n      \"authorization\" : \"Bearer \"+token\r\n    }});\r\n\r\n\r\n    navigation.navigate('AttractionsMap');\r\n  }\r\n\r\n\r\n async  function handleSelectImages(){\r\n    const {status} = await  ImagePicker.requestCameraRollPermissionsAsync();\r\n\r\n    if (status !== 'granted'){\r\n      alert ('eita , precisamos de acesso ás suas fotos...')\r\n      return ;\r\n    }\r\n    const result = await ImagePicker.launchImageLibraryAsync({\r\n      allowsEditing:true,\r\n      quality : 1,\r\n      mediaTypes : ImagePicker.MediaTypeOptions.Images,\r\n    });\r\n    \r\n    if(result.cancelled){\r\n      return;\r\n    }else{\r\n\r\n    const {uri : image} = result;\r\n\r\n    setImages([...images, image])\r\n  }\r\n}\r\n\r\nconst [municipality, setMunicipality] = useState<Municipality[]>([]);\r\n\r\n\r\n\r\nuseEffect(()=>{\r\n  api.get('/municipality' , {\r\n    headers : {\r\n      \"authorization\" : \"Bearer \"+token,\r\n    }\r\n  }).then(response =>{\r\n      setMunicipality(response.data.name);\r\n  });\r\n},);\r\n\r\n\r\n  return (\r\n    <ScrollView style={styles.container} contentContainerStyle={{ padding: 24 }}>\r\n      <Text style={styles.title}>Dados</Text>\r\n\r\n      <Text style={styles.label}>Nome</Text>\r\n      <TextInput\r\n        style={styles.input}\r\n        value={name}\r\n        onChangeText={setName}\r\n      />\r\n\r\n      <Text style={styles.label}>Sobre</Text>\r\n      <TextInput\r\n        style={[styles.input, { height: 110 }]}\r\n        multiline\r\n        value={about}\r\n        onChangeText={setAbout}\r\n      />\r\n\r\n      <Text style={styles.label}>Fotos</Text>\r\n\r\n      <View style={styles.uploadedImagesContainer}>\r\n        {images.map(image => {\r\n          return (\r\n            <Image \r\n            key={image}\r\n            source={{uri : image}}\r\n            style={styles.uploadedImage}\r\n            ></Image>\r\n          );\r\n        })}\r\n      </View>\r\n\r\n      <TouchableOpacity style={styles.imagesInput} onPress={handleSelectImages}>\r\n        <Feather name=\"plus\" size={24} color=\"#15B6D6\" />\r\n      </TouchableOpacity>\r\n\r\n      <Text style={styles.title}>Visitação</Text>\r\n\r\n      <Text style={styles.label}>Instruções</Text>\r\n      <TextInput\r\n        style={[styles.input, { height: 110 }]}\r\n        multiline\r\n        value={instruction}\r\n        onChangeText={setInstructions}\r\n      />\r\n\r\n      <Text style={styles.label}>Horario de visitas</Text>\r\n      <TextInput\r\n        style={styles.input}\r\n        value={opening_hours}\r\n        onChangeText={setOpeninghours}\r\n      />\r\n\r\n      <Text style={styles.label}>WhatsApp</Text>\r\n      <TextInput\r\n        style={styles.input}\r\n        value={whatsapp}\r\n        onChangeText={setWhatsapp}\r\n      />\r\n\r\n\r\n      <View style={styles.switchContainer}>\r\n        <Text style={styles.label}>Atende final de semana?</Text>\r\n        <Switch \r\n          thumbColor=\"#fff\" \r\n          trackColor={{ false: '#ccc', true: '#39CC83' }}\r\n          value={open_on_weekends}\r\n          onValueChange={setOpenonweekeds}\r\n        />\r\n      </View>\r\n\r\n      <RectButton style={styles.nextButton}  onPress={handleCreateAttraction}>\r\n        <Text style={styles.nextButtonText}>Cadastrar</Text>\r\n      </RectButton>\r\n    </ScrollView>\r\n  )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n  },\r\n\r\n  title: {\r\n    color: '#5c8599',\r\n    fontSize: 24,\r\n    fontFamily: 'Nunito_700Bold',\r\n    marginBottom: 32,\r\n    paddingBottom: 24,\r\n    borderBottomWidth: 0.8,\r\n    borderBottomColor: '#D3E2E6'\r\n  },\r\n\r\n  label: {\r\n    color: '#8fa7b3',\r\n    fontFamily: 'Nunito_600SemiBold',\r\n    marginBottom: 8,\r\n  },\r\n\r\n  comment: {\r\n    fontSize: 11,\r\n    color: '#8fa7b3',\r\n  },\r\n\r\n  input: {\r\n    backgroundColor: '#fff',\r\n    borderWidth: 1.4,\r\n    borderColor: '#d3e2e6',\r\n    borderRadius: 20,\r\n    height: 56,\r\n    paddingVertical: 18,\r\n    paddingHorizontal: 24,\r\n    marginBottom: 16,\r\n    textAlignVertical: 'top',\r\n  },\r\n  uploadedImagesContainer :{\r\n    flexDirection : 'row',\r\n\r\n  },\r\n  uploadedImage :{\r\n    width : 64 ,\r\n    height : 64 ,\r\n    borderRadius : 20 ,\r\n    marginBottom : 32,\r\n    marginRight:8\r\n  },\r\n  imagesInput: {\r\n    backgroundColor: 'rgba(255, 255, 255, 0.5)',\r\n    borderStyle: 'dashed',\r\n    borderColor: '#96D2F0',\r\n    borderWidth: 1.4,\r\n    borderRadius: 20,\r\n    height: 56,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginBottom: 32,\r\n  },\r\n\r\n  switchContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    marginTop: 16,\r\n  },\r\n\r\n  nextButton: {\r\n    backgroundColor: '#15c3d6',\r\n    borderRadius: 20,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    height: 56,\r\n    marginTop: 32,\r\n  },\r\n\r\n  nextButtonText: {\r\n    fontFamily: 'Nunito_800ExtraBold',\r\n    fontSize: 16,\r\n    color: '#FFF',\r\n  }\r\n})"]},"metadata":{},"sourceType":"module"}