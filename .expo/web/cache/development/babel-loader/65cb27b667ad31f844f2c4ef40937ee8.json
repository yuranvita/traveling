{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Yuran\\\\Documents\\\\PROJECTs\\\\Apptur\\\\src\\\\pages\\\\AttractionsMap.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport MapView, { Marker, PROVIDER_GOOGLE, Callout } from 'react-native-maps';\nimport mapMarker from \"../images/map-marker.png\";\nimport { Feather } from '@expo/vector-icons';\nimport { useNavigation } from '@react-navigation/native';\nimport { RectButton } from 'react-native-gesture-handler';\nimport api from \"../services/api\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nexport default function AttractionMap() {\n  var _this = this;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      attraction = _useState2[0],\n      setAttraction = _useState2[1];\n\n  function feed() {\n    var token;\n    return _regeneratorRuntime.async(function feed$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"myToken\"));\n\n          case 2:\n            token = _context.sent;\n            api.get('/attractions', {\n              headers: {\n                \"authorization\": \"Bearer \" + token\n              }\n            }).then(function (response) {\n              setAttraction(response.data);\n            });\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  ;\n  useEffect(function () {\n    feed();\n  });\n  var navigation = useNavigation();\n\n  function handleNavigateToCreateAttraction() {\n    navigation.navigate('SelectMapPosition');\n  }\n\n  function handleNavigateToDetails(id) {\n    navigation.navigate('AttractionsDetails', {\n      id: id\n    });\n  }\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, React.createElement(MapView, {\n    provider: PROVIDER_GOOGLE,\n    style: styles.map,\n    mapType: \"terrain\",\n    showsPointsOfInterest: false,\n    initialRegion: {\n      latitude: 2.8246016,\n      longitude: -60.6732288,\n      latitudeDelta: 0.008,\n      longitudeDelta: 0.008\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, attraction.map(function (attraction) {\n    return React.createElement(Marker, {\n      key: attraction.id,\n      icon: mapMarker,\n      calloutAnchor: {\n        x: 2.7,\n        y: 0.8\n      },\n      coordinate: {\n        latitude: attraction.latitude,\n        longitude: attraction.longitude\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }\n    }, React.createElement(Callout, {\n      tooltip: true,\n      onPress: function onPress() {\n        handleNavigateToDetails(attraction.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }, React.createElement(View, {\n      style: styles.calloutContainer,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 19\n      }\n    }, React.createElement(Text, {\n      style: styles.calloutText,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 25\n      }\n    }, attraction.name))));\n  })), React.createElement(View, {\n    style: styles.footer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.footerText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, attraction.length), React.createElement(RectButton, {\n    style: styles.createOrphanageButton,\n    onPress: handleNavigateToCreateAttraction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, React.createElement(Feather, {\n    name: \"plus\",\n    size: 20,\n    color: \"#fff\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }))));\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  map: {\n    height: Dimensions.get('window').height,\n    width: Dimensions.get('window').width\n  },\n  calloutContainer: {\n    width: 168,\n    height: 46,\n    paddingHorizontal: 16,\n    backgroundColor: 'rgba(255, 255, 255, 0.8)',\n    borderRadius: 16,\n    justifyContent: 'center'\n  },\n  calloutText: {\n    color: '#8089a5',\n    fontSize: 14,\n    fontFamily: 'Nunito_700Bold'\n  },\n  footer: {\n    position: 'absolute',\n    left: 24,\n    right: 24,\n    bottom: 32,\n    backgroundColor: '#FFF',\n    borderRadius: 20,\n    height: 56,\n    paddingLeft: 24,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    elevation: 3\n  },\n  footerText: {\n    color: '#8fa7b3',\n    fontFamily: 'Nunito_700Bold'\n  },\n  createOrphanageButton: {\n    width: 56,\n    height: 56,\n    backgroundColor: '#15c3d6',\n    borderRadius: 28,\n    justifyContent: 'center',\n    alignItems: 'center'\n  }\n});","map":{"version":3,"sources":["C:/Users/Yuran/Documents/PROJECTs/Apptur/src/pages/AttractionsMap.tsx"],"names":["React","useEffect","useState","MapView","Marker","PROVIDER_GOOGLE","Callout","mapMarker","Feather","useNavigation","RectButton","api","AsyncStorage","AttractionMap","attraction","setAttraction","feed","getItem","token","get","headers","then","response","data","navigation","handleNavigateToCreateAttraction","navigate","handleNavigateToDetails","id","styles","container","map","latitude","longitude","latitudeDelta","longitudeDelta","x","y","calloutContainer","calloutText","name","footer","footerText","length","createOrphanageButton","StyleSheet","create","flex","backgroundColor","alignItems","justifyContent","height","Dimensions","width","paddingHorizontal","borderRadius","color","fontSize","fontFamily","position","left","right","bottom","paddingLeft","flexDirection","elevation"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;;;;;AAEA,OAAOC,OAAP,IAAkBC,MAAlB,EAAyBC,eAAzB,EAA0CC,OAA1C,QAAwD,mBAAxD;AACA,OAAOC,SAAP;AACA,SAAQC,OAAR,QAAsB,oBAAtB;AACA,SAASC,aAAT,QAA8C,0BAA9C;AACA,SAASC,UAAT,QAA2B,8BAA3B;AACA,OAAOC,GAAP;AACA,OAAOC,YAAP,MAAyB,2CAAzB;AAWA,eAAe,SAASC,aAAT,GAAwB;AAAA;;AAAA,kBAgBDX,QAAQ,CAAe,EAAf,CAhBP;AAAA;AAAA,MAgB9BY,UAhB8B;AAAA,MAgBlBC,aAhBkB;;AAoBrC,WAAeC,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACsBJ,YAAY,CAACK,OAAb,CAAqB,SAArB,CADtB;;AAAA;AACQC,YAAAA,KADR;AAEIP,YAAAA,GAAG,CAACQ,GAAJ,CAAQ,cAAR,EAAyB;AACvBC,cAAAA,OAAO,EAAG;AACR,iCAAkB,YAAUF;AADpB;AADa,aAAzB,EAIGG,IAJH,CAIQ,UAAAC,QAAQ,EAAG;AACfP,cAAAA,aAAa,CAACO,QAAQ,CAACC,IAAV,CAAb;AACH,aAND;;AAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAWG;AAEDtB,EAAAA,SAAS,CAAC,YAAI;AACZe,IAAAA,IAAI;AACL,GAFQ,CAAT;AAMA,MAAMQ,UAAU,GAAGf,aAAa,EAAhC;;AAEA,WAASgB,gCAAT,GAA2C;AACvCD,IAAAA,UAAU,CAACE,QAAX,CAAoB,mBAApB;AACH;;AAED,WAASC,uBAAT,CAAiCC,EAAjC,EAA6C;AACzCJ,IAAAA,UAAU,CAACE,QAAX,CAAoB,oBAApB,EAA2C;AAACE,MAAAA,EAAE,EAAFA;AAAD,KAA3C;AACH;;AAID,SACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEC,MAAM,CAACC,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,OAAD;AAEA,IAAA,QAAQ,EAAEzB,eAFV;AAGA,IAAA,KAAK,EAAEwB,MAAM,CAACE,GAHd;AAIA,IAAA,OAAO,EAAC,SAJR;AAKA,IAAA,qBAAqB,EAAE,KALvB;AAMA,IAAA,aAAa,EAAE;AACbC,MAAAA,QAAQ,EAAE,SADG;AAEbC,MAAAA,SAAS,EAAG,CAAC,UAFA;AAGbC,MAAAA,aAAa,EAAG,KAHH;AAIbC,MAAAA,cAAc,EAAG;AAJJ,KANf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAcCrB,UAAU,CAACiB,GAAX,CAAe,UAAAjB,UAAU,EAAG;AACzB,WACI,oBAAC,MAAD;AACA,MAAA,GAAG,EAAEA,UAAU,CAACc,EADhB;AAEA,MAAA,IAAI,EAAErB,SAFN;AAGA,MAAA,aAAa,EAAE;AACb6B,QAAAA,CAAC,EAAC,GADW;AAEbC,QAAAA,CAAC,EAAC;AAFW,OAHf;AAOA,MAAA,UAAU,EAAE;AACVL,QAAAA,QAAQ,EAAElB,UAAU,CAACkB,QADX;AAEVC,QAAAA,SAAS,EAAGnB,UAAU,CAACmB;AAFb,OAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAYA,oBAAC,OAAD;AAAS,MAAA,OAAO,MAAhB;AAAiB,MAAA,OAAO,EAAE,mBAAI;AAACN,QAAAA,uBAAuB,CAACb,UAAU,CAACc,EAAZ,CAAvB;AAAuC,OAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAMC,MAAM,CAACS,gBAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACM,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAIT,MAAM,CAACU,WAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAoCzB,UAAU,CAAC0B,IAA/C,CADN,CADF,CAZA,CADJ;AAoBH,GArBA,CAdD,CADF,EAsCE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEX,MAAM,CAACY,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEZ,MAAM,CAACa,UAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAiC5B,UAAU,CAAC6B,MAA5C,CADF,EAEE,oBAAC,UAAD;AAAY,IAAA,KAAK,EAAEd,MAAM,CAACe,qBAA1B;AAAiD,IAAA,OAAO,EAAEnB,gCAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,OAAD;AAAS,IAAA,IAAI,EAAC,MAAd;AAAqB,IAAA,IAAI,EAAE,EAA3B;AAA+B,IAAA,KAAK,EAAC,MAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFF,CAtCF,CADF;AA+CH;AAED,IAAMI,MAAM,GAAGgB,UAAU,CAACC,MAAX,CAAkB;AAC7BhB,EAAAA,SAAS,EAAE;AACTiB,IAAAA,IAAI,EAAE,CADG;AAETC,IAAAA,eAAe,EAAE,MAFR;AAGTC,IAAAA,UAAU,EAAE,QAHH;AAITC,IAAAA,cAAc,EAAE;AAJP,GADkB;AAQ7BnB,EAAAA,GAAG,EAAE;AACHoB,IAAAA,MAAM,EAAGC,UAAU,CAACjC,GAAX,CAAe,QAAf,EAAyBgC,MAD/B;AAEHE,IAAAA,KAAK,EAAGD,UAAU,CAACjC,GAAX,CAAe,QAAf,EAAyBkC;AAF9B,GARwB;AAa7Bf,EAAAA,gBAAgB,EAAC;AACfe,IAAAA,KAAK,EAAC,GADS;AAEfF,IAAAA,MAAM,EAAC,EAFQ;AAGfG,IAAAA,iBAAiB,EAAC,EAHH;AAIfN,IAAAA,eAAe,EAAE,0BAJF;AAKfO,IAAAA,YAAY,EAAC,EALE;AAMfL,IAAAA,cAAc,EAAE;AAND,GAbY;AAuB7BX,EAAAA,WAAW,EAAE;AACXiB,IAAAA,KAAK,EAAC,SADK;AAEXC,IAAAA,QAAQ,EAAE,EAFC;AAGXC,IAAAA,UAAU,EAAG;AAHF,GAvBgB;AA8B7BjB,EAAAA,MAAM,EAAE;AACNkB,IAAAA,QAAQ,EAAG,UADL;AAENC,IAAAA,IAAI,EAAG,EAFD;AAGNC,IAAAA,KAAK,EAAE,EAHD;AAINC,IAAAA,MAAM,EAAG,EAJH;AAMNd,IAAAA,eAAe,EAAE,MANX;AAONO,IAAAA,YAAY,EAAG,EAPT;AAQNJ,IAAAA,MAAM,EAAE,EARF;AASNY,IAAAA,WAAW,EAAC,EATN;AAWNC,IAAAA,aAAa,EAAE,KAXT;AAYNd,IAAAA,cAAc,EAAG,eAZX;AAaND,IAAAA,UAAU,EAAG,QAbP;AAcNgB,IAAAA,SAAS,EAAG;AAdN,GA9BqB;AA+C7BvB,EAAAA,UAAU,EAAG;AACXc,IAAAA,KAAK,EAAG,SADG;AAEXE,IAAAA,UAAU,EAAE;AAFD,GA/CgB;AAoD7Bd,EAAAA,qBAAqB,EAAC;AACpBS,IAAAA,KAAK,EAAG,EADY;AAEpBF,IAAAA,MAAM,EAAG,EAFW;AAGpBH,IAAAA,eAAe,EAAG,SAHE;AAIpBO,IAAAA,YAAY,EAAE,EAJM;AAMpBL,IAAAA,cAAc,EAAE,QANI;AAOpBD,IAAAA,UAAU,EAAG;AAPO;AApDO,CAAlB,CAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Dimensions, StyleSheet, Text, TouchableOpacity, View } from 'react-native';\r\nimport MapView, { Marker,PROVIDER_GOOGLE ,Callout} from 'react-native-maps'\r\nimport mapMarker from '../images/map-marker.png';\r\nimport {Feather} from '@expo/vector-icons';\r\nimport { useNavigation, useFocusEffect } from '@react-navigation/native';\r\nimport { RectButton } from 'react-native-gesture-handler';\r\nimport api from '../services/api';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\ninterface Attraction {\r\n    id : number ;\r\n    name : string ; \r\n    latitude : number ;\r\n    longitude : number ;\r\n\r\n}\r\n\r\n\r\nexport default function AttractionMap(){\r\n   \r\n\r\n  // const [token, setToken] = useState(\"\");\r\n  \r\n  // const load = async () => {\r\n  //   let token = await AsyncStorage.getItem(\"myToken\");\r\n\r\n  //   if(token !== null){\r\n  //     setToken(token);\r\n  //   }\r\n  // }\r\n  \r\n \r\n  \r\n\r\n  const [attraction, setAttraction] = useState<Attraction[]>([]);\r\n\r\n\r\n\r\n  async function feed() {\r\n    const token = await AsyncStorage.getItem(\"myToken\");\r\n      api.get('/attractions' , {\r\n        headers : {\r\n          \"authorization\" : \"Bearer \"+token,\r\n        }\r\n      }).then(response =>{\r\n          setAttraction(response.data);\r\n      });\r\n\r\n\r\n    };\r\n  \r\n    useEffect(()=>{\r\n      feed();\r\n    })\r\n   \r\n    \r\n\r\n    const navigation = useNavigation();\r\n\r\n    function handleNavigateToCreateAttraction(){\r\n        navigation.navigate('SelectMapPosition');\r\n    }\r\n\r\n    function handleNavigateToDetails(id : number){\r\n        navigation.navigate('AttractionsDetails' , {id});\r\n    }\r\n\r\n\r\n\r\n    return (\r\n      <View style={styles.container}>\r\n        <MapView\r\n         \r\n        provider={PROVIDER_GOOGLE}\r\n        style={styles.map}\r\n        mapType='terrain'\r\n        showsPointsOfInterest={false}\r\n        initialRegion={{\r\n          latitude: 2.8246016,\r\n          longitude : -60.6732288,\r\n          latitudeDelta : 0.008,\r\n          longitudeDelta : 0.008,\r\n        }}\r\n        \r\n        >\r\n        {attraction.map(attraction =>{\r\n            return (\r\n                <Marker\r\n                key={attraction.id}\r\n                icon={mapMarker}\r\n                calloutAnchor={{\r\n                  x:2.7,\r\n                  y:0.8,\r\n                }}\r\n                coordinate={{\r\n                  latitude: attraction.latitude,\r\n                  longitude : attraction.longitude,\r\n                }}\r\n              >\r\n                <Callout tooltip onPress={()=>{handleNavigateToDetails(attraction.id)}}>\r\n                  <View style = {  styles.calloutContainer}>\r\n                        <Text style = {styles.calloutText}>{attraction.name}</Text>\r\n                  </View>\r\n                </Callout>\r\n              </Marker>\r\n            );\r\n        })}\r\n        </MapView>\r\n        <View style={styles.footer}>\r\n          <Text style={styles.footerText}>{attraction.length}</Text>\r\n          <RectButton style={styles.createOrphanageButton} onPress={handleNavigateToCreateAttraction}>\r\n            <Feather name=\"plus\" size={20} color=\"#fff\" />\r\n          </RectButton>\r\n        </View>\r\n      </View>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      backgroundColor: '#fff',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n    },\r\n  \r\n    map: {\r\n      height : Dimensions.get('window').height,\r\n      width : Dimensions.get('window').width,\r\n    },\r\n  \r\n    calloutContainer:{\r\n      width:168 ,\r\n      height:46,\r\n      paddingHorizontal:16,\r\n      backgroundColor: 'rgba(255, 255, 255, 0.8)',\r\n      borderRadius:16 ,\r\n      justifyContent: 'center',\r\n  \r\n    },\r\n  \r\n    calloutText :{\r\n      color:'#8089a5',\r\n      fontSize: 14 ,\r\n      fontFamily : 'Nunito_700Bold',\r\n  \r\n    },\r\n  \r\n    footer :{\r\n      position : 'absolute',\r\n      left : 24 ,\r\n      right :24 ,\r\n      bottom : 32 ,\r\n  \r\n      backgroundColor: '#FFF',\r\n      borderRadius : 20,\r\n      height :56,\r\n      paddingLeft:24,\r\n  \r\n      flexDirection: 'row',\r\n      justifyContent : 'space-between',\r\n      alignItems : 'center',\r\n      elevation : 3,\r\n    },\r\n  \r\n    footerText : {\r\n      color : '#8fa7b3',\r\n      fontFamily: 'Nunito_700Bold'\r\n    },\r\n  \r\n    createOrphanageButton:{\r\n      width : 56 ,\r\n      height : 56 ,\r\n      backgroundColor : '#15c3d6',\r\n      borderRadius :28,\r\n  \r\n      justifyContent :'center',\r\n      alignItems : 'center'\r\n  \r\n  \r\n    }\r\n  \r\n  });"]},"metadata":{},"sourceType":"module"}